<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- BACKGROUND DECORATIONS -->
    <img src="./deco-back/cloud3.png" alt="" class="deco cloud cloud1">
    <img src="./deco-back/cloud3.png" alt="" class="deco cloud cloud2">
    <img src="./deco-back/cloud3.png" alt="" class="deco cloud cloud3">
    <img src="./deco-back/cloud3.png" alt="" class="deco cloud cloud4">

    <img src="./deco-back/palmtree.png" alt="" class="deco tree tree1">
    <img src="./deco-back/palmtree.png" alt="" class="deco tree tree2">
    <img src="./deco-back/palmtree.png" alt="" class="deco tree tree3">
    <img src="./deco-back/palmtree.png" alt="" class="deco tree tree4">

    <img src="./deco-back/beach1.webp" alt="" class="beach deco">
    <img src="./deco-back/sun.png" alt="" class="deco sun">
    <!-- 
        Rick and morty themed menu
     -->
    <div class="header">
        <a href="index.html">Rick and Mortys Food Recipes</a>
        <div class="left-header">
            <ul class="links">
                <li>
                    <a href="https://www.youtube.com/watch?v=aQ5xbuqsc70&ab_channel=AlexBulavintsev">Contact us</a>
                </li>
                <li><a href="https://www.youtube.com/watch?v=zkIqz2U6Vc0&ab_channel=R1ckM0rty">Our motto</a></li>
                <li><a href="https://www.youtube.com/watch?v=hucNlh9-Fik&ab_channel=RelaxationMusic">Random button!</a>
                </li>
            </ul>
            <img class="banner" src="banner.avif" alt="">
        </div>
    </div>
    <div class="opening-display">
        <p>Lets eat, Morty.</p>
        <img class="opening-img" src="opening1.webp" alt="">
    </div>
    <div class="content">
        <div class="convo convo-start">
            <div class="speech-box">
                <img src="rick/rick_suggest.jpeg" alt="" class="speech-img rick">
                <div class="speech-bubble-box">
                    <img src="speechbubble.jpeg" alt="" class="speech-bubble speech">
                    <p class="speech-text rick">Hey Morty im soooo hungry</p>
                </div>
            </div>

            <div class="speech-box">
                <img src="morty/morty_norm.png" alt="" class="speech-img morty">

                <div class="speech-bubble-box">
                    <img src="speechbubble.jpeg" alt="" class="speech-bubble speech">
                    <p class="speech-text morty">Phh hungry! what about burgers!</p>
                </div>
            </div>

            <div class="speech-box">
                <img src="rick/rick_happy.png" alt="" class="speech-img rick">

                <div class="speech-bubble-box">
                    <img src="speechbubble.jpeg" alt="" class="speech-bubble speech">
                    <p class="speech-text rick"><strong>Burgers!? </strong>Morty, I have something even better than
                        that!!
                    </p>
                </div>
            </div>
            <div class="speech-box">
                <img src="morty/morty_suprised.png" alt="" class="speech-img morty">
                <div class="speech-bubble-box">
                    <img src="speechbubble.jpeg" alt="" class="speech-bubble speech">
                    <p class="speech-text morty">Oh god no! Rick not another one of your inventions!</p>
                </div>
            </div>

        </div>
        <div class="recipes">
            <div class="recipe-card pickle glow-anim">
                <div class="hidden-div recipe-pickle">
                    <p class="hidden-text recipe-pickle"> Pickle Rick</p>
                    <p>Ingredients</p>
                    <ul>
                        <li>Pint of Pickle DNA</li>
                        <li>One Rick Sanchez</li>
                        <li>Recombobulator</li>
                    </ul>
                    <p>How to create:</p>
                    <ul>
                        <li>First add the pint of pickle DNA into a bowl</li>
                        <li>Put rick in the adjacent transmofication chamber of the Recombobulator</li>
                        <li>Apply force on the Recombobulator lever</li>
                        <li>Pickle riiiick!!</li>
                    </ul>
                </div>
                <img href="./index.html" src="food/food_picklerick.jpg" alt="" class="recipe pickle recipe-img">
                <div class="anim anim-card-pickle"></div>
                <p class="card-text pickle-text">Pickle Rickkkkk</p>
            </div>
            <div class="recipe-card burger glow-anim">
                <div class="hidden-div recipe-burger">
                    <p class="hidden-text recipe-burger"> Rick Burgers!</p>
                    <p>Ingredients:</p>
                    <ul>
                        <li>Burger patties with 100% space beef</li>
                        <li>Sesame bun</li>
                        <li>Cheese to taste</li>
                        <li>Fresh Tomatoes</li>
                        <li>Fresh Onions</li>
                        <li>Tomato sauace</li>
                        <li>Salt</li>
                        <li>Peper</li>
                    </ul>
                    <p>Method</p>
                    <ul>
                        <li>Grill the patties on high here, in case you made your own, add 35% fat to 60% meat with</li>
                        <li>seasoning arlic and herbs</li>
                        <li>Make a sour mix with the onions to offset the fattyness. Viniger</li>
                        <li>Grill the cheese with the buns for crispyness - not to crisp</li>
                        <li>Add everything for magnum burger</li>
                    </ul>
                </div>
                <img id="img-burger" src="food/Eyeburgers.jpeg" alt="" class="recipe burger recipe-img">
                <div class="anim anim-card-burger"></div>
                <p class="card-text burger-text">Burgers!</p>
            </div>
            <div class="recipe-card chips glow-anim">
                <div class="hidden-div recipe-chips">
                    <p class="hidden-text recipe-chips">Chips</p>
                    <ul>
                        <li>Portatoes</li>
                        <li>salt and pepper</li>
                    </ul>
                    <ul>
                        <li>
                            Cut potatoes
                        </li>
                        <li>add seasoning</li>
                        <li>fry them!</li>
                    </ul>
                </div>
                <img src="food/pringle.jpeg" alt="" class="recipe chips recipe-img">
                <div class="anim anim-card-chips"></div>
                <p class="card-text chips-text">chippies</p>
            </div>
            <div class="recipe-card szhuan glow-anim">
                <div class="hidden-div recipe-szhuan">
                    <p class="hidden-text recipe-szhuan"> SZHUAN SAUCE</p>
                    <P>morty, wheres the szehuan sauce, o god i want that sweet delicious szehuan sauce they had at
                        mcdonalds
                        wheres the sauce, o my god I need the sauce in ject it into my veins morty, mmorty get the
                        injector i need
                        it into my veins... arhghghg wabubdaub siezure morty help sauce
                    </P>
                </div>
                <img src="szehuan.gif" alt="" class="recipe szhuan recipe-img">
                <div class="anim anim-card-szhuan"></div>
                <p class="card-text szhuan-text">Szehuan sauce</p>
            </div>
        </div>

        <div class="convo convo-end">

            <div class="speech-box">
                <img src="rick/rick_happy.png" alt="" class="speech-img spgim">
                <div class="speech-bubble-box">
                    <img src="speechbubble.jpeg" alt="" class="speech-bubble">
                    <p class="speech-text rick">not what you where expected innit!!</p>
                </div>
            </div>
            <div class="speech-box">
                <img src="morty/morty_suprised.png" alt="" class="speech-img">
                <div class="speech-bubble-box">
                    <img src="speechbubble.jpeg" alt="" class="speech-bubble">
                    <p class="speech-text morty">Rick that was pretty good i shouldnt have doubted you</p>
                </div>
            </div>
            <div class="speech-box">
                <img src="rick/rick_suggest.jpeg" alt="" class="speech-img">
                <div class="speech-bubble-box">
                    <img src="speechbubble.jpeg" alt="" class="speech-bubble">
                    <p class="speech-text rick">Morty, ofcourse not!</p>
                </div>
            </div>
            <div class="speech-box">
                <img src="morty/mrtyscare.png" alt="" class="speech-img">
                <div class="speech-bubble-box">
                    <img src="speechbubble.jpeg" alt="" class="speech-bubble">
                    <p class="speech-text morty">wwwait, what was the pickle I had!</p>
                </div>
            </div>
        </div>
    </div>

    <div class="ending-display">
        <img class="closing-img" src="dance1.gif" alt="">
    </div>

    <div class="footer">
        Rick and Morty Owned by them not me
        Dafont for fonts used
    </div>
</body>

<script>
    const recipeCards = Array.from(document.getElementsByClassName("recipe-card"))
    const hiddenDivs = Array.from(document.getElementsByClassName("hidden-div"))
    // allows animations to play on click
    // https://stackoverflow.com/questions/4847996/css-animation-onclick
    const triggerReflow = (element, classname) => {
        element.classList.remove(classname); // reset animation
        void element.offsetWidth; // trigger reflow
        element.classList.add(classname); // start animation
    }


    recipeCards.forEach(element => {
        element.addEventListener('click', () => {
            foodType = element.classList[1]
            const animDiv = document.getElementsByClassName(`anim-card-${foodType}`)[0]
            const img = document.querySelector(`img.${foodType}`)
            const cardTxt = document.querySelector(`.${foodType}-text`)
            const hiddenDiv = document.querySelector(`.hidden-div.recipe-${foodType}`)
            img.classList.remove("unapply-dissolve-anim")
            if (!img.classList.contains('apply-dissolve-anim'))
                triggerReflow(img, 'apply-dissolve-anim')
            cardTxt.classList.add("fade-out")

            hiddenDiv.classList.remove("fade-out")
            hiddenDiv.classList.add("fade-in")

        })
    })

    const removeAnimExcept = (filter) => (element) => {
        foodType = element.classList[1]
        if (filter == 0 || foodType != filter) {
            const animDiv = document.getElementsByClassName(`anim-card-${foodType}`)[0]
            const img = document.querySelector(`img.${foodType}`)
            const cardTxt = document.querySelector(`.${foodType}-text`)
            img.classList.remove("apply-dissolve-anim")
            if (!img.classList.contains("unapply-dissolve-anim"))
                triggerReflow(img, 'unapply-dissolve-anim')
            const hiddenDiv = document.querySelector(`.hidden-div.recipe-${foodType}`)
            cardTxt.classList.remove("fade-out")

            hiddenDiv.classList.remove("fade-in")
            hiddenDiv.classList.add("fade-out")
        }
    }


    // detect a click outside of that element then transition the img and text back
    // https://stackoverflow.com/questions/152975/how-do-i-detect-a-click-outside-an-element
    checkHasClickedElement = (event) => {
        if (!event.target.closest(".recipe-card")) {
            recipeCards.forEach(removeAnimExcept(0))
        } else {
            const recipeCard = event.target.closest(".recipe-card")
            foodType = recipeCard.classList[1]
            recipeCards.forEach(removeAnimExcept(foodType))
        }
    }
    window.addEventListener('click', checkHasClickedElement)

    // Add also if click somewhere else it closes the other ones
    const speechBoxs = Array.from(document.getElementsByClassName("speech-box"));
    const onscrollFunc = () =>
        speechBoxs.forEach(element => {
            const rect = element.getBoundingClientRect();
            if (rect.y < 0) return;
            const newOpacity = 1 - Math.pow((rect.y / window.innerHeight), 3) + 0.1
            element.style.opacity = newOpacity
        });

    // Page set up
    window.onscroll = onscrollFunc
    recipeCards.forEach((removeAnimExcept(0)))
    hiddenDivs.forEach(e => e.classList.add("fade-out"))
</script>

</html>